
@model PagedList.IPagedList<Leaveentiy>
@using PagedList.Mvc;


@{
    ViewBag.Title = "Manage Products";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    .input-icons i {
        position: absolute;
    }

    .input-icons {
        width: 100%;
        margin-bottom: 10px;
    }

    .icon {
        padding: 10px;
        min-width: 40px;
    }

    .input-field {
        width: 100%;
        padding: 10px;
        text-align: center;
    }
</style>

<link href="~/Content/themes/base/jquery-ui.min.css" rel="stylesheet" />


@section Scripts{
    @Scripts.Render("~/bundles/jqueryval")
<script src="~/Scripts/jquery-3.6.0.min.js"></script>
<script src="~/Scripts/jquery-ui-1.13.0.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $("#Fromdate").datepicker({ dateFormat: 'dd/mm/yy' });
        $("#Todate").datepicker({
            dateFormat: 'dd/mm/yy',
            // onSelect: function (dateString, txtDate) {
            //onClose: function (dateString, txtDate) {
                //TotalCount();


           // }

        })
       

    });
   
    function clearResult() {
        debugger
        document.getElementById("#Fromdate").value = ''
        document.getElementById("#Todate").value = ''
    }
    </script>
    }

@using (Html.BeginForm("Manage", "Leave", FormMethod.Post))
{
    <div class="row">
        <div class="col-xs-12 page-header">
            <div class="row">

                <div class="col-sm-4">
                <label>
                    From Date:
                </label>
                <div class="form-group has-feedback">
                    @*<i class="input-icons"></i>
                    <i class="glyphicon glyphicon-calendar"></i>*@
                        @Html.TextBox("FromDate", "", new { @class = "form-control", @id = "Fromdate", @maxlength = "100" })
                    
                 </div>

            </div>
            <div class="col-sm-4">
                <label>
                    To date:
                </label>
                <div class="form-group">
                    @*<span class="glyphicon glyphicon-calendar"></span>*@

                    @Html.TextBox("ToDate", "", new { @class = "form-control", @id = "Todate", @maxlength = "100" })
                </div>
            </div>
                <div class="col-sm-4">
                    <label>
                        Status:
                    </label>
                    <div class="form-group">
                        @Html.DropDownList("Status", new List<SelectListItem> {
                                      new SelectListItem { Text = "All", Value = "0" },
                                      new SelectListItem { Text = "Open", Value = "1" },
                                      new SelectListItem { Text = "Approved", Value = "2" },
                                      new SelectListItem { Text = "Rejected", Value = "3" }}, new { @class = "form-control" })
                    </div>
                </div>

            <div class="row">
                <div class="col-sm-4">
                    <label></label>
                    <div class="form-group">
                        <input type="submit" class="btn btn-primary" value="Search" />
                    </div>
                </div>
                @*<div class="col-sm-2">
                    <label></label>
                    <div class="form-group">
                        <input type="reset" class="btn btn-primary" value="Reset" onclick="clearResult()"/>

                    </div>
                </div>*@
            </div>

            </div>
        </div>
    </div>

    if (ViewBag.Message != "")
    {
        <div id="msgDisplay" class="@ViewBag.Class">
            <button data-dismiss="alert" class="close" type="button">
                <i class="ace-icon fa fa-times"></i>
            </button>
            <label>@ViewBag.Message</label>
        </div>
    }
        <div class="row">
            <div class="col-xs-12">
                <table class="table table-striped table-bordered table-hover table-responsive">
                    <tr class="text-center">
                        <th class="text-center">From Date</th>
                        <th class="text-center">To Date</th>
                        <th class="text-center">Leave Reason</th>
                        <th class="text-center">Leave Type</th>
                        <th class="text-center">Total Days</th>
                        <th class="text-center">Status</th>
                            <th class="text-center">Action</th>

                    </tr>
                    @foreach (var item in Model)
                    {
                        <tr class="text-center">
                            <td>
                                @Html.DisplayFor(modelItem => item.Fromdate)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Todate)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.leavereason)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Description)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.leavecount)
                            </td>
                            <td>
                                @General.GetStatus(item.Status)
                            </td>

                            <td class="text-center">
                             
                            @if (item.Status == 2 && Convert.ToDateTime(item.Todate) < DateTime.Today)
                            {
                                <span>
                                    <a href="@Url.Action("Add", new { User = clsEncrypt.Encrypt(item.leaveId.ToString()) })" title='Edit' class="btn btn-success btn-sm disabled">
                                        <i class="fa fa-pencil-square-o fa-lg" aria-hidden="true"></i>
                                    </a>
                                </span>
                                <span>
                                    <a href="@Url.Action("Delete", new { User = clsEncrypt.Encrypt(item.leaveId.ToString()) })" onclick="return ShowConfirmation(event,this,'You want to delete this record?')" title='Delete'
                                       class="btn btn-success btn-sm disabled">
                                        <i class="fa fa-trash-o fa-lg" aria-hidden="true"></i>

                                    </a>
                                </span>

                            }
                            @if(item.Status == 2 && Convert.ToDateTime(item.Todate) >= DateTime.Today)
                            {
                                <span>
                                    <a href="@Url.Action("Add", new { User = clsEncrypt.Encrypt(item.leaveId.ToString()) })" title='Edit' class="btn btn-success btn-sm">
                                        <i class="fa fa-pencil-square-o fa-lg" aria-hidden="true"></i>
                                    </a>
                                </span>
                                <span>
                                    <a href="@Url.Action("Delete", new { User = clsEncrypt.Encrypt(item.leaveId.ToString()) })" onclick="return ShowConfirmation(event,this,'You want to delete this record?')" title='Delete'
                                       class="btn btn-success btn-sm">
                                        <i class="fa fa-trash-o fa-lg" aria-hidden="true"></i>

                                    </a>
                                </span>

                            }


                              @if(item.Status==3)
                              {

                                <span>
                                    <a href="@Url.Action("Add", new { User = clsEncrypt.Encrypt(item.leaveId.ToString()) })" title='Edit' class="btn btn-success btn-sm disabled">
                                        <i class="fa fa-pencil-square-o fa-lg" aria-hidden="true"></i>
                                    </a>
                                </span>
                                <span>
                                    <a href="@Url.Action("Delete", new { User = clsEncrypt.Encrypt(item.leaveId.ToString()) })" onclick="return ShowConfirmation(event,this,'You want to delete this record?')" title='Delete'
                                       class="btn btn-success btn-sm disabled">
                                        <i class="fa fa-trash-o fa-lg" aria-hidden="true"></i>

                                    </a>
                                </span>
                               }
                              @if (item.Status == 1)
                              {

                                <span>
                                    <a href="@Url.Action("Add", new { User = clsEncrypt.Encrypt(item.leaveId.ToString()) })" title='Edit' class="btn btn-success btn-sm">
                                        <i class="fa fa-pencil-square-o fa-lg" aria-hidden="true"></i>
                                    </a>
                                </span>

                                <span>
                                    <a href="@Url.Action("Delete", new { User = clsEncrypt.Encrypt(item.leaveId.ToString()) })" onclick="return ShowConfirmation(event,this,'You want to delete this record?')" title='Delete' class="btn btn-success btn-sm">
                                        <i class="fa fa-trash-o fa-lg" aria-hidden="true"></i>
                                      

                                    </a>
                                </span>
                                <span>
                                    <a href="@Url.Action("Cancel", new { User = clsEncrypt.Encrypt(item.leaveId.ToString()) })" onclick="return ShowConfirmation(event,this,'You want to cancel this record?')" title='Cancel' class="btn btn-success btn-sm">
                                      
                                        Cancel


                                    </a>
                                </span>
                              }

                            </td>
                        </tr>
                    }
                    @Html.Partial("Paging")
                </table>
            </div>
        </div>

}